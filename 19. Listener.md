## `StandardContext#String applicationListeners[]`
解析`web.xml`后，`StandardContext.addApplicationListener()`中，将`<listener>`相关值加入到`StandardContext#String applicationListeners[]`中，这包括所有的`<listener>`的`<listener-class>`字符串值
```
"main@1" prio=5 tid=0x1 nid=NA runnable
  java.lang.Thread.State: RUNNABLE
	  at org.apache.catalina.core.StandardContext.addApplicationListener(StandardContext.java:2693)
	  at org.apache.catalina.startup.ContextConfig.configureContext(ContextConfig.java:1279)
	  at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1195)
	  at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:775)
	  - locked <0xacd> (a org.apache.catalina.startup.ContextConfig)
	  at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:299)
	  at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)
	  at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4993)
	  - locked <0xacc> (a org.apache.catalina.core.StandardContext)
	  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)
	  at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:740)
	  at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:716)
	  at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:703)
	  at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1134)
	  at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1868)
	  at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	  at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	  at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	  at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)
	  at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:1045)
	  at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:433)
	  at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1578)
	  at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:308)
	  at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)
	  at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:424)
	  - locked <0xa12> (a org.apache.catalina.core.StandardHost)
	  at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:367)
	  at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:964)
	  at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:839)
	  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)
	  at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1425)
	  at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1415)
	  at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	  at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	  at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)
	  at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:941)
	  - locked <0xa76> (a org.apache.catalina.core.StandardEngine)
	  at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:258)
	  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)
	  at org.apache.catalina.core.StandardService.startInternal(StandardService.java:422)
	  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)
	  - locked <0xa77> (a org.apache.catalina.core.StandardService)
	  at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:770)
	  - locked <0xb2d> (a java.lang.Object)
	  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)
	  - locked <0xa78> (a org.apache.catalina.core.StandardServer)
	  at org.apache.catalina.startup.Catalina.start(Catalina.java:657)
	  at sun.reflect.NativeMethodAccessorImpl.invoke0(NativeMethodAccessorImpl.java:-1)
	  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	  at java.lang.reflect.Method.invoke(Method.java:498)
	  at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:355)
	  at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:495)
```

## `StandardContext#Object applicationLifecycleListenersObjects[]`
`StandardContext.listenerStart()`方法中：
```
"main@1" prio=5 tid=0x1 nid=NA runnable
  java.lang.Thread.State: RUNNABLE
	  at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4549)
	  at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5095)
	  - locked <0xacc> (a org.apache.catalina.core.StandardContext)
	  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)
	  at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:740)
	  at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:716)
	  at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:703)
	  at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1134)
	  at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1868)
	  at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	  at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	  at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	  at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)
	  at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:1045)
	  at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:433)
	  at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1578)
	  at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:308)
	  at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)
	  at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:424)
	  - locked <0xa12> (a org.apache.catalina.core.StandardHost)
	  at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:367)
	  at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:964)
	  at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:839)
	  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)
	  at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1425)
	  at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1415)
	  at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	  at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)
	  at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)
	  at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:941)
	  - locked <0xa76> (a org.apache.catalina.core.StandardEngine)
	  at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:258)
	  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)
	  at org.apache.catalina.core.StandardService.startInternal(StandardService.java:422)
	  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)
	  - locked <0xa77> (a org.apache.catalina.core.StandardService)
	  at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:770)
	  - locked <0xbf6> (a java.lang.Object)
	  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)
	  - locked <0xa78> (a org.apache.catalina.core.StandardServer)
	  at org.apache.catalina.startup.Catalina.start(Catalina.java:657)
	  at sun.reflect.NativeMethodAccessorImpl.invoke0(NativeMethodAccessorImpl.java:-1)
	  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	  at java.lang.reflect.Method.invoke(Method.java:498)
	  at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:355)
	  at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:495)
```
1. 先根据字符串类名`StandardContext#String applicationListeners[]`生成相应的实例：`Object results[]`。
2. 然后将`Object results[]`根据类型分类（instanceof），分别存到`StandardContext#List<Object> applicationEventListenersList`和`StandardContext#Object applicationLifecycleListenersObjects[]`中。
3. 然后对于`StandardContext#Object applicationLifecycleListenersObjects[]`中的每一个`ServletContextListener`类型的listener，调用`ServletContextListener#contextInitialized()`方法，同时调用`ContainerBase#fireContainerEvent()`触发相应的事件。

## `StandardContext#List<Object> applicationEventListenersList`
1. 这种类型的listener所监听的事件触发是通过调用`Context#fireRequestDestroyEvent()`、`Context#fireRequestDestroyEvent()`方法。
2. 在`Context#fireRequestDestroyEvent()`、`Context#fireRequestDestroyEvent()`方法中，遍历`StandardContext#List<Object> applicationEventListenersList`，如果是相对应的event，则调用listener对应的方法进行处理。例如对于事件`ServletRequestEvent`，只有`ServletRequestListener`类型的listener才需要调用`requestInitialized()`方法进行处理。其他类型的listener不需要处理。
3. 在`StandardHostValve#invoke()`方法中，在处理Request前会调用`Context#fireRequestDestroyEvent()`方法，处理完Request后调用`Context#fireRequestDestroyEvent()`方法。
